# 주석

이름만으로 코드 내용을 설명할 수 없는 경우나 직관적이지 않은 코드가 있을 때 코드의 내용, 의도, 목적을 주석으로 보완하는 것이 좋다.  
그러나, 무분별하게 주석을 추가하면 오히려 코드의 가독성과 유지보수성을 떨어뜨린다.  

<br/>

## 1. 주석의 종류와 목적

 - 문서화 주석: 형식적인 설명으로 클래스, 함수, 변수를 선언하거나 정의할 때 사용한다.
 - 비형식 주석: 인라인 주석, 블록 주석 등의 형태로 정의나 선언뿐만 아니라 전반적인 소스 코드에 작성
```java
/**
 * 문서화 주석
 * 
 * 주로 someFunction이 무엇을 하는지에 대한 설명과
 * 사용 시 주의 사항 등을 작성한다.
 */
void someFunction() {
    //  비형식 주석
    // 이 경우 anotherFunction을 호출한 이유와 의도를 설명한다.
    anotherFunction(argument)
}
```
<br/>

### 1-1. 코드를 좀 더 빠르게 이해하기 위해

주석은 설명을 간결하게 요약하여 높은 수준으로 추상화하되, 세분화하여 작성하는 것이 좋다.  

동작을 문장으로 설명하기 어려운 경우에는 코드나 값의 예시를 주석에 포함하는 것도 좋은 방법이다. 클래스를 설명하는 주석이라면 표준적인 사용법을, 함수에 대한 주석이라면 인수, 반환값, 부수효과의 예시를 보여주는 것이 좋다.  

<br/>

## 2. 문서화 주석

문서화 주석은 선언이나 정의를 정해진 형식으로 작성하는 주석으로, 클래스, 함수, 변수의 선언이나 정의를 설명하는 형태로 작성하는 경우가 많다.  
 - 자바나 코틀린으로 문서를 작성하는 경우 Javadoc, KDoc을 사용할 수 있다.

<br/>

### 2-1. 안티패턴

 - __안티패턴 1: 자동으로 생성된 문서를 방치한다.__
    - 자동으로 출력된 문서화 주석은 그 자체로는 아무런 정보를 담고 있지 않다.
    - 자동 생성된 태그에 아무런 설명을 추가하지 않으면 정보를 얻을 수 없다.
```java
/**
 * @param keyword
 * @return
 */
String getDescription(String keyword) {
    // ..
}
```
<br/>

 - __안티패턴 2: 선언과 같은 내용을 반복하여 쓴다.__
    - 문서화 주석이 클래스, 함수, 변수의 선언과 동일한 정보만 가지고 있다면 그 주석은 필요 없다고 할 수 있다.

<br/>

 - __안티패턴 3: 코드를 자연어로 직역한다.__
    - 코드를 쉽게 이해하도록 하기 위해 개요를 첫 문장에 작성하는 것이 좋다.
```java
// ❌
/**
 * 만약 conditionA가 성립하면 doA()를 호출한다.
 * 그렇지 않다면 doB()를 호출한다.
 * 만약 conditionC가 성립한다면 ... (생략) ...
 * 
 */
String getDescription(String keyword) {
    if (conditionA) {
        doA();
    } else {
        doB();
        if (conditionC) { .. }
    }
}
```
<br/>

 - __안티패턴 4: 개요를 작성하지 않는다.__
    - 코드를 이해하기 쉽도록 하려면 예외 처리나 경계 조건과 같은 세부적인 사양보다 핵심이 되는 동작의 개요를 먼저 작성하는 것이 좋다.
```java
// ❌ 예외 처리 동작만 설명하는 주석
/**
 * 전달받은 키워드 keyword가 빈 문자열인 경우 예외를 발생시킨다.
 */
String getDescription(String keyword) {}
```
<br/>

 - __안티패턴 5: 구현의 세부 내용을 언급한다.__
    - 문서화 주석을 작성할 때 이것을 읽는 사람이 구현의 상세를 알고 있을 것을 전제해서는 안 된다.
```java
// ❌ 공개 메서드 설명에 비공개 멤버를 언급하는 문서화 주석
/**
 * 비공개 멤버 dictionary가 가지는 문자열을 반환한다.
 */
String getDescription(String keyword) {}
```
<br/>

 - __안티패턴 6: 코드를 사용하는 쪽을 언급한다.__
    - 문서화 주석이 설명하는 범위는 선언이나 정의에 국한되어야 한다.
    - 즉, 해당 코드를 사용하는 쪽을 언급해서는 안 된다.
```java
// ❌ 사용되는 쪽을 언급한 주석
/**
 * .. (개요) ..
 * 
 * 이 함수는 UserProfilePresenter에서 사용됨
 */
String getDescription(String keyword) {}
```
<br/>

### 2-2. 문서화 주석의 구성

 - 코드가 무엇인지, 어떤 일을 하는지를 먼저 간결하게 설명한다.
 - 코드보다 더 높은 수준의 추상도와 세밀함을 유지한다.
 - 구현의 상세 내용이나 코드를 사용하는 쪽을 언급하지 않는다.
 - __요약을 먼저 작성하고, 세부적인 내용을 보충한다.__

<br/>

### 2-3. 문서화 주석의 요약

요약에서는 해당 클래스, 함수, 변수가 무엇이고, 무엇을 하는지를 간략하게 설명한다.  

 - __요약에서 사용할 문법__
    - 요약문을 작성할 때는 문서화 도구나  규약에 규정된 문법을 따르는 것이 좋다.
 - __요약에서 설명하는 내용__
    - 요약에서는 그 코드가 무엇인지, 무엇을 하는지를 최대한 간결하게 설명한다.


<br/>

### 2-4. 문서화 주석의 상세

요약에서 다 설명하지 못한 사항이 있을 때는 상세를 추가할 수 있다.  

 - __기본적인 사용법__
    - 코드의 사용법을 구체적으로 설명
```java
/**
 * 메시지 내용(본문 텍스트, 발신자 이름, 발신 시각)을 
 * 레이아웃에 바인딩하여 표시하는 프레젠테이션 클래스
 * 
 * 메시지 모델 MessageModel을 updateLayout에 전달하여
 * 모든 표시 내용을 업데이트한다.
 */
class MessageViewPresenter {}

/**
 * 주어진 문자열을 쉼표 ","로 분리하여 문자열 리스트로 반환한다.
 * 
 * 예를 들어 "a, bc, , d"를 인수로 주면
 * List.of("a", "bc", "", "d")를 반환한다.
 */
List<String> splitByComma(String string) {}
```
<br/>

 - __반환값의 보충 설명__
    - 부수 효과가 있는 함수를 만든 경우, 부수 효과가 무엇인지 알 수 있도록 함수 이름을 정한다.
```java
// ✔ 반환값에 대한 내용 설명
/**
 * ...(요약)...
 * 
 * 또한 반환값은 이 함수가 호출되기 전의 선택 상태를 의미한다.
 */
boolean setSelectedState(boolean isSelected) {}

/**
 * ...(요약)...
 * 
 * 반환되는 값은 \[0.0, 1.0\] 범위로 제한된다.
 */
Float getDownloadProgress() {}
```
<br/>

 - __제약과 예외 동작__
    - 제약 조건과 이를 위반했을 때의 동작을 자세히 설명한다.
```java
// ✔ 호출 시 상태의 제약 조건을 설명하는 문서화 주석
/**
 * ...(요약)...
 * 
 * ...(재상 방법에 대한 상세)...
 * play 또는 seek를 호출하기 전에는
 * prepare로 동영상 파일을 미리 로드해야 한다.
 * 
 * 만약, prepare 없이 play나 seek가 호출된 경우
 * 예외 ResourceNotReadyException을 발생시킨다.
 */
class VideoPlay {}

// ✔ 인수의 제약 조건을 설명하는 문서화 주석
/**
 * ...(요약)...
 * 
 * 리스트의 범위를 벗어난 position이 전달되면 null을 반환한다.
 */
T valueAt(int position) {}
```
<br/>

## 3. 비형식 주석

비형식 주석은 형식이 없기 때문에 서식에 얽매이지 않고 다양한 내용을 다룰 수 있으며 주로 규모가 큰 코드를 분할하거나 직관적이지 않은 코드를 설명할 경우에 작성한다.  

