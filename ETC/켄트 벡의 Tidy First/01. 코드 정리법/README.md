# 코드 정리법

## 01. 보호 구문

```javascript
// ❌ Bad
if (조건)
    if (다른 조건)
        .. 코드

// ✔ Good
if (조건) return
if (다른 조건) return
```

<br/>

## 02. 안 쓰는 코드

안 쓰는 코드는 그냥 지워라.  
 - 형상 관리 도구를 이용하면 지운 코드를 다시 가져올 수 있다.

<br/>

## 03. 대칭으로 맞추기

코드는 유기체처럼 성장한다. 즉, 같은 문제라도 시대와 사람에 따라 다른 모습으로 해결된다. 이것은 코드를 읽기 어렵게 만들기도 한다.  

__읽는 입장에서 코드의 일관성이 중요하다. 코드를 한 가지 방식을 선택해서 정하고, 일관성있는 패턴을 유지한다.__  

<br/>

## 04. 새로운 인터페이스로 기존 루틴 부르기

기존 인터페이스로 인해 더 어렵거나, 복잡하거나, 혼란스러워지곤 한다.  
이 경우 호출하고 싶은 인터페이스를 새롭게 구현해서 호출한다.  

<br/>

## 05. 읽는 순서

함수 A와 함수 B의 선언 순서를 바꾸기만 해도 실행 결과가 달라질 수 있다.  
되도록 전체 파일의 순서를 바꾸는 대신에, 읽는 순서가 영향을 크게 주는 것들을 바꾼다.  

<br/>

## 06. 응집도를 높이는 배치

코드의 순서를 바꿔서 변경할 요소들을 가까이 둔다.  

<br/>

## 07. 선언과 초기화를 함께 옮기기

타입이 포함된 선언과 초기화 코드가 떨어져 있으면 코드 읽기가 더 어려워진다.  
한참 뒤에야 초기화 코드를 보게 된다면, 이미 변수가 어떤 맥락에서 선언되었는지 잊어버리게 된다.  

<br/>

## 08. 설명하는 변수

코드의 표현식이 긴 맥락이 필요하다면, 전체에서 일부 표현식을 추출한 후, 표현식의 의도가 드러나도록 변수 이름을 만들어 할당한다.  

```java
// ❌
return new Person(
    "홍길동", 20
);

// ✔
String name = "홍길동";
int age = 20;
return new Person(
    name, age
)
```

<br/>

## 09. 설명하는 상수

코드를 보다 모르는 숫자나 상수 문자열이 반복해서 나타나기도 한다.  

```java
// ❌
if (response.code = 404) {
    // ..
}

// ✔
private final static int PAGE_NOT_FOUNT = 404;

if (response.code = PAGE_NOT_FOUNT) {
    // ..
}
```

<br/>

## 10. 명시적인 매개변수

맵 타입의 데이터를 그대로 넘기는 경우 코드를 읽을 때 어떤 데이터가 필요한지 알기 어렵다.  
이럴 때 앞부분에서 매개변수 값을 채운 후, 뒷부분에서 명시적으로 전달하며 루틴을 나눌 수 있다.  

```java
public static void main(String[] args) {
    // ❌
    Map params = Map.of(
        "a": 1,
        "b": 2
    );
    foo(params);

    // ✔
    Map params = Map.of(
        "a": 1,
        "b": 2
    );
    foo2(params);
}

public void foo(Map<String, Object> params) {
    // a와 b 사용
}

public void foo2(Map<String, Object> params) {
    // 사용되는 변수를 넘겨준다.
    foo_body(params.get("a"), params.get("b"));
}

public void foo_body(int a, int b) {
    // a와 b 사용
}
```
<br/>

## 11. 비슷한 코드끼리

긴 코드 덩어리에서 구분이 되는 프로세스에는 두 부분 사이에 빈 줄을 넣어 분리한다.  
이것은 코드 정리 중에서 가장 단순한 정리법이다.  

<br/>

## 12. 도우미 추출

코드 프로세스 중에서 목적이 분명하고 나머지 코드와는 상호작용이 적은 코드가 있을 수 있다.  
해당 코드 블록을 추려내고, Helper나 Util 같은 도우미로 추출한 후에 이름을 붙인다.  

<br/>

## 13. 하나의 더미

때로는 코드가 너무 작은 조각으로 나뉘어져 있어 오히려 전체적으로 이해하기 어렵게 될 수 있다.  
이러한 경우 필요한 만큼의 코드를 하나의 더미처럼 흩어진 코드를 모으고 난 뒤에, 정리하는 것이 좋을 수 있다.

<br/>

## 15. 불필요한 주석 지우기

코드만으로 내용을 모두 이해할 수 있다면 주석을 삭제한다.  

## 요약

 - 안 쓰는 코드는 지워라. 형상관리 도구를 통해 언제든지 복구가 가능하다.
 - 코드는 유기체처럼 성장한다. 때문에, 코드의 일관성이 중요하다.
 - 변수 선언과 초기화를 함께 한다. 선언을 하고, 이후에 초기화 하는 경우 맥락을 이해하기 어렵다.