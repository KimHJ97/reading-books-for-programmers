# 데이터 모델링 이론

## 데이터 모델링이란

데이터 모델은 현실 세계의 정보나 데이터를 시스템으로 구축하기 위해 추상화하여 체계적으로 표현한 모형이다. 데이터 모델링은 영속성을 갖는 데이터에 대한 시스템 구조를 사람이 이해할 수 있도록 형상화하는 과정이다. 사람이 정보로서 의미있는 대상을 인지하고, 식별하는 과정(개념적)을 거쳐 식별한 것을 기호 등을 통해 추상화하여 표현(논리적)하고, 정보시스템의 데이터베이스로 구축하기 위해 추상화된 모델을 구체화된 형태로 변환한다.(물리적)  

<br/>

데이터 모델링은 업무에서 사용하는 각종 데이터를 포함해 업무 내용, 절차 등을 구축하고자 하는 시스템의 데이터베이스에 기록하여 지속적으로 관리하고 활용하기 위해 데이터를 구조화하고 형상화하는 과정이다. 업무에서 요구하는 각종 데이터를 시스템 측면에서 체계화하고 구체화하여 데이터 모델로 표현한다.  
 - 데이터 모델은 개체관계 모델(ER, Entity-Relationship Model), 관계 모델(Relational Model), 계층 모델(Hierarchical Model), 망 모델(Network Model) 등이 있다.

<br/>

## ER 모델

ER 모델은 표현하고자 하는 현실 세계의 업무를 개체와 관계라는 두 가지 개념으로 표현하는 모델로 1976년 P.P.Chen이 처음 제안하였다.  
ERD는 ER 모델에서 사용하는 실체와 관계를 도식화한 것으로, 실체와 이들 간의 관계를 알기 쉽도록 미리 약속한 도형을 사용하여 표현한 것이다.  

<br/>

### ER 모델의 질적 특성

 - 완전성
    - ER 모델은 현실 세계의 모든 업무적인 요구사항을 표현하고 있어야 한다.
 - 정확성
   - ER 모델의 개념대로 데이터 모델을 작성해야 한다.
   - 엔티티 대신 속성을 사용하지 않고, 슈퍼타입 관계를 명확히 하며, 슈퍼타입과 서브타입 사이의 상속을 표현하고, 관계와 관련된 개별 엔티티를 명확히 정의해야 한다.
 - 최소성
   - 요구사항의 모든 특성이 ER 모델에 한 번만 나타나도록 설계해야 한다.
 - 자명성
   - 별도 보조자료 없이 설명이나 증명을 하지 않아도 요구사항에 대한 뜻이나 의미를 명확히 설명할 수 있어야 한다.
 - 확장성
   - 향후 업무 범위나 규모가 확대되거나 변경될 경우 새로운 요구사항을 쉽게 반영할 수 있도록 유연한 모델을 설계해야 한다.
 - 표현성
   - ER 모델은 요구사항을 자연스럽게 표현하고 추가적인 설명 없이도 ER 모델의 의미를 쉽게 이해할 수 있도록 명확하게 설계해야 한다.
   - 주소1, 주소2 보다는 기본주소, 상세주소 등으로 속성명을 부여하는 것이 더 직관적이다.
 - 가독성
   - ER 모델을 읽기 쉽고 그 뜻을 쉽게 알아차릴 수 있도록 표현해야 한다.

<br/>

### ER 모델 구성 요소

ER 모델의 구성 요소로는 엔티티, 관계, 속성이 있으며, 속성과 관계 중 하나 이상의 조합으로 구성된 식별자를 포함한다.  

#### `엔티티`

엔티티는 고객, 상품, 직원처럼 현실 세계에 실제로 존재하는 실체이거나, 조작, 서비스, 직업처럼 개념적인 것이다. 데이터 모델 측면에서 엔티티는 업무를 구현하는 데 필요하고 관리해야 하는 주체, 대상, 행위 등의 모든 집합적인 것으로 정의할 수 있다.  
 - 엔티티는 적어도 둘 이상의 인스턴스가 존재할 수 있어야 하고, 최소한 둘 이상의 속성이 있어야 하며, 반드시 각 인스턴스를 식별할 수 있는 속성이나 관계가 하나 이상 정의되어야 한다.

<br/>

슈퍼타입 엔티티는 하나 이상의 서브타입 엔티티와 관계된 일반화된 엔티티이며, 서브타입에 공통으로 존재하는 속성을 관리한다.  
서브타입 엔티티는 각각의 서브타입에만 존재하는 고유한 속성을 관리한다. 서브타입은 슈퍼타입의 식별자, 속성, 관계 등 모든 특성을 상속받는다.  

<br/>

 - 엔티티 일반화
   - 엔티티의 일반화는 엔티티 각각이 가지고 있는 고유한 특징을 일반화하여 공통의 속성으로 재정의한 것이다. 엔티티를 일반화하게 되면 여러 개의 엔티티를 하나의 공통된 엔티티로 만들 수 있다. 엔티티 일반화는 두 개 이상의 하위 수준 엔티티를 결합하여 상위 수준의 엔티티로 통합하는 상향식 접근 방식이다.  
   - 일반화는 인스턴스 존재 유형에 따라 완전/불완전, 배타적/포괄적 일반화로 나눌 수 있다. 상위 수준 엔티티의 모든 인스턴스가 하위 수준 엔티티 중 하나에만 존재한다면 배타적 일반화이고, 둘 이상의 하위 엔티티에 속한다면 포괄적 일반화에 해당한다.  
   - 개인고객과 주문, 법인고객과 주문의 관계처럼 엔티티 간의 배타 관계가 있으면 배타 관계를 해소하여 고객과 주문 간의 관계로 대체하면 업무 관계를 단순하게 정의할 수 있다. 또한, 신규로 고객 유형이 추가되는 경우 고객유형만 확장하면 되므로 업무 변화에 유연하게 적응할 수 있다.  
 - 특수화
   - 특수화는 일반화의 반대 개념으로, 하나의 상위 수준 엔티티를 두 개 이상의 하위 수준 엔티티로 분할하는 하향식 접근 방식이다.  
 - 집단화
   - 집단화는 하나의 엔티티로 취급되는 두 개 엔티티 사이에서 나타나며, 해당 엔티티와의 관계가 상위 수준 엔티티로 나타난다.

<br/>

 - 관계에 따른 엔티티
   - 강한 엔티티
      - 독립적으로 존재하며, 엔티티 내에서 자체 식별자를 사용하여 고유하게 인스턴스를 식별할 수 있는 엔티티
      - 고객, 상품 등
   - 약한 엔티티
      - 다른 엔티티에 종속적이며, 자체 식별자를 가지지 못하고, 다른 엔티티의 식별자를 상속받아 사용하는 엔티티
      - 주문상품은 주문에서 주문번호 속성을 상속받아 식별자로 사용한다.
 - 형태에 따른 엔티티
   - 독립 엔티티
      - 사람, 물건, 장소, 개념처럼 원래부터 현실에 존재하는 엔티티
      - 고객, 상품, 창고, 조직 등
   - 업무중심 엔티티
      - 업무를 처리하면서 발생하는 데이터에 해당하는 엔티티
      - 주문, 결제, 배송, 청구 등
   - 종속 엔티티
      - 주로 업무중심 엔티티에서 1차 정규화로 인해 분리된 엔티티
      - 주문상품, 주문배송 등 (주문 엔티티의 종속 엔티티)
   - 교차 엔티티
      - 두 개 이상의 엔티티 간에 발생하는 트랜잭션에 의해 생성되는 엔티티
      - 고객과 역할 간의 관계 엔티티인 고객역할 엔티티처럼 대부분 논리 모델링에서 다대다 관계를 해소하기 위해 도출된다.
 - 생성 관점에 따른 엔티티
   - 핵심 엔티티
      - 고객, 상품, 조직처럼 자신의 부모 엔티티를 갖지 않는 독립적이며, 핵심적인 엔티티
   - 중요 엔티티
      - 핵심 엔티티 간의 거래 관계에 의해 생성되는 엔티티이지만, 업무의 핵심이 되는 엔티티
      - 계약은 고객과 상품 거래 관계에 의해 생성되며, 고객과 상품을 부모로 갖는다.
   - 행위 엔티티
      - 실제 업무 행위에 의해서 지속해서 발생하는 거래 행위에 대한 엔티티
      - 청구내역 엔티티는 중요 엔티티에 해당하는 계약에 의해 지속해서 발생하는 데이터를 관리하는 엔티티에 해당한다.
 - 형태에 따른 엔티티
   - 실체 엔티티
      - 고객, 상품과 같이 눈으로 볼 수 있는 물리적인 형태를 가지는 엔티티
   - 개념 엔티티
      - 조직, 보험상품, 서비스 등 물리적인 형태는 없으나 개념적으로 존재하는 비실체 엔티티
   - 사건 엔티티
      - 계약, 주문, 결제 등과 같이 업무 행위와 관련된 비실체 엔티티
      - 데이터가 빈번하게 생성되고, 변경되는 특성이 있다.

<br/>

#### `관계`

엔티티와 엔티티 간에 존재하는 업무 규칙을 정의하고, 엔티티 간에 어떤 관계가 이루어질 수 있는지 표현한다. 관계는 관계수, 선택성, 식별성, 관계명 등으로 구성된다.  
 - 관계수
   - 어떤 엔티티의 인스턴스 하나가 다른 엔티티 몇개(1, m) 인스턴스와 대응될 수 있는지 표시한 것으로, 상대 엔티티쪽에 까마귀 발로 표시한다.
   - 일대일(1:1), 일대다(1:M), 다대다(M:N) 3가지 유형이 있다.
 - 선택성
   - 해당 엔티티 인스턴스에 대해 상대 엔티티에 인스턴스가 반드시 존재해야 하는지, 존재하지 않아도 되는지 표시한다.
   - 엔티티 인스턴스에 대해 상대 엔티티 인스턴스 존재 유무를 나타내며, 양쪽 필수, 한쪽 필수, 양쪽 선택으로 나누어진다.
 - 식별자 상속
   - 엔티티 간의 관계를 정의하면서 엔티티의 식별자를 다른 엔티티에서 상속받을 때 식별자로 상속받을지(식별관계), 일반 속성으로 상속받을지(비식별관계) 표시한다.
   - 식별관계와 비식별 관계로 구분할 수 있다.
      - 식별관계는 참조되는 상위 엔티티 식별자가 참조하는 하위 엔티티 식별자로 상속되는 경우를 말하고, 비식별 관계는 식별자가 아닌 일반 속성으로 상속되는 관계를 말한다.
 - 관계명
   - 관계의 의미나 이름을 표시한다. 의미를 명확하게 표시한다는 측면에서 양쪽에 모두 기술하기도 하며, 관계선만으로도 의미가 통하는 경우 이름을 생략해도 무방하다.
 - 관계 유형
   - 기본 관계, 재귀적 관계, 병렬 관계, 슈퍼타입/서브타입 관계 등이 있다.
   - 기본 관계: 엔티티와 엔티티가 하나의 관계를 맺는다.
   - 재귀적 관계: 하나의 엔티티가 다른 엔티티가 아닌 자기 자신과 관계를 맺는 경우 재귀적 관계 또는 순환 관계라고 한다. 계층적인 구조를 표현하는 데 유용하다. (부서에 상위와 하위 부서)
   - 병렬 관계: 엔티티와 엔티티 간에 두 개 이상의 관계를 맺는다. 고객은 보험계약의 계약자이면서 피보험자이기도 하다.
   - 슈퍼타입/서브타입 관계: 공통 속성을 관리하는 슈퍼타입 엔티티와 개별 속성을 관리하는 서브타입 엔티티는 배타적/포괄적인 관계를 가진다.
   - 배타적인 관계: 엔티티가 두 개 이상의 다른 엔티티의 합집합과 관계를 가질 때 배타적인 관계 또는 아크(Arc) 관계라고 한다. 동일한 의미를 가지는 관계에 대해 서로 다른 하나 이상 엔티티와 관계를 통합할 때 발생한다.
 - 관계 차원
   - 관계에 참여하는 엔티티의 수를 의미한다. 단항 관계, 이항 관계, 삼항 관계, n항 관계가 있으며, 삼항 관계 이상은 잘 나타나지 않는다.
   - 단항 관계: 부서 엔티티 내에서 부서와 상위 부서 관계처럼 하나의 엔티티 내에 존재하는 관계를 말한다.
   - 이항 관계: 부서와 사원, 고객과 주문 등 두 개 엔티티 간의 관계에 해당하며, 가장 일반적인 형태의 관계다.
   - 삼항 관계: 세 개 엔티티 간의 관계에 해당한다. 흔하게 나타나지 않고, 진짜 삼항 관계인지, 아니면 이항 관계를 삼항 관계로 잘못 표현한 것인지 확인해야 한다.

<br/>

#### `속성`

속성은 데이터를 표현하는 가장 작은 단위이며, 속성이 가지는 의미를 통해 엔티티 특성이나 상태를 알 수 있다. 하나의 엔티티는 두 개 이상의 속성을 가지며, 속성명, 식별자여부, 옵셔널리티, 도메인 등으로 구성된다.